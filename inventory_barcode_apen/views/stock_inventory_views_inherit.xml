<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    
    <record id="stock_inventory_line_tree_inherit" model="ir.ui.view">
        <field name="name">stock.inventory.line.tree.inherit</field>
        <field name="model">stock.inventory.line</field>
        <field name="inherit_id" ref="stock.stock_inventory_line_tree" />
        <field name="arch" type="xml">
            <xpath expr="/tree/field[@name='prod_lot_id']" position="attributes" >
                <attribute name="attrs">{'readonly': ['|', '|',
                    ('product_tracking', '=', 'none'),
                    ('is_editable', '=', True),
                    ('state', '!=', 'confirm')]}</attribute>
            </xpath>
        </field>
    </record>

    <record id="stock_inventory_line_barcode_inherit" model="ir.ui.view">
        <field name="name">stock.inventory.barcode.inherit</field>
        <field name="model">stock.inventory.line</field>
        <field name="inherit_id" ref="stock_barcode.stock_inventory_line_barcode" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='prod_lot_id']" position="attributes" >
                <attribute name="attrs">{
                    'required': [('product_tracking', '!=', 'none')],
                    'readonly': ['|', ('is_editable', '=', True), ('state', '!=', 'confirm')]}</attribute>
            </xpath>
        </field>
    </record>

</odoo>